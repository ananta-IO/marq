<template name="questionsAnswer">
	<div class="container" id="questions-answer">

		<div class="row-fluid visible-phone">
			<div class="span12">
				<a href="#" class="next-question pull-right btn btn-small">next <i class="icon-arrow-right"></i></a>
				<a href="#" class="previous-question btn btn-small"><i class="icon-arrow-left"></i> previous</a>
			</div>
		</div>

		<div class="row-fluid">

			{{#if previousQuestion}}
				<div class="span2 well hidden-phone flip previous-question">
					<p class="center"><i class="icon-chevron-left"></i></p>
				</div>
			{{else}}
				<div class="span2 hidden-phone">
					&nbsp;
				</div>
			{{/if}}

			<div class="span8 well main-answer-view">
				{{#with question}}
					{{> question}}
				{{/with}}
			</div>


			{{#if nextQuestion}}
				<div class="span2 well hidden-phone flip next-question">
					<p class="center"><i class="icon-chevron-right"></i></p>
				</div>
			{{else}}
				<div class="span2 well hidden-phone">
					<p><a href="#" class="previous-question">Answer</a> and <a href="/questions/new">ask</a> questions to view more.</p>
				</div>
			{{/if}}

		</div>

	</div>
</template>


<template name="question">
	<div id="question-{{_id}}" class="question">
		{{#if this}}

			{{#if alert}}
				<div class="row-fluid">
					<div class="span12">
						{{#with alert}}
							<div class="alert alert-{{type}}">
								{{#if dismiss}}
									<button type="button" class="close" data-dismiss="alert">Ã—</button>
								{{/if}}
								{{message}}
							</div>
						{{/with}}
					</div>
				</div>
			{{/if}}

			<h3>
				{{question}}
			<h3/>

			{{#if currentUserHasAnswered _id}}
				<div class="answer-choices">
					{{#each answerChoices}}
						<p>
							{{#if isUsersAnswer this}}
								<button class="btn btn-info btn-block btn-large answer selected" type="button" data-answer="{{this}}" disabled>
									<!-- <span class="marq"><span class="inner"></span></span> -->
									{{this}}
								</button>
							{{else}}
								<button class="btn btn-block btn-large answer" type="button" data-answer="{{this}}" disabled>
									<!-- <span class="marq"><span class="inner"></span></span> -->
									{{this}}
								</button>
							{{/if}}
						</p>
					{{/each}}
				</div>
				<hr/>
				<div class="row-fluid">
					<div class="span12">
						<div class="question-rate">
							<p>
								Was this a good question?
								{{#if voted _id}}
									&middot; you said <b>{{vote _id}}</b>
									&middot; cumulative rating <b>{{voteTally}}</b>
								{{else}}
									<button class="btn btn-success vote" type="button" data-vote="for">
										yes
									</button>
									&nbsp;
									<button class="btn btn-danger vote" type="button" data-vote="against">
										no
									</button>
								{{/if}}
							</p>
						</div>
					</div>
				</div>
				<hr/>
				<h4>Answer Breakdown</h4>
				<div class="row-fluid">
					<div class="span12">
						<div class="chart"></div>
					</div>
				</div>
			{{else}}
				<div class="answer-choices">
					{{#each answerChoices}}
						<p>
							<button class="btn btn-info btn-block btn-large answer" type="button" data-answer="{{this}}">
								<!-- <span class="marq"><span class="inner"></span></span> -->
								{{this}}
							</button>
						</p>
					{{/each}}
				</div>
			{{/if}}

		{{else}}
			<p><a href="#" class="previous-question">Answer</a> and <a href="/questions/new">ask</a> questions to view more.</p>
		{{/if}}
	</div>
</template>